(()=>{"use strict";var t=[],e=!1;const a=class{constructor(t){this.title=t,this.status=!1,this.type="project",this.items=[]}setTitle(t){this.title=t}toggleStatus(){this.status=!this.status}addTask(t){this.items.push(t)}deleteTask(t){this.items.splice(t,1)}},n=function(){const n=document.querySelector(".content");return{pageOnLoad:()=>{(()=>{let t=i.createContainer("app-header",""),e=i.createEl("h1","app-title","","To Do List App"),a=i.createEl("h4","app-about","","Odin Project JavaScript Course Project 4"),r=i.createEl("p","app-credit","","A program by Mizakson");t.appendChild(e),t.appendChild(a),t.appendChild(r),n.appendChild(t)})(),(()=>{let t=i.createContainer("project-form-container",""),e=i.createContainer("project-form-header",""),a=i.createEl("h2","project-form-title","","What to do?...");e.appendChild(a),t.appendChild(e);let r=i.createContainer("add-project-form-container",""),s=i.createEl("form","add-project-form","","");s.innerHTML="\n        \n        <input type='text' maxlength='35' placeholder=' -- Project Title -- ' id='add-project-title'>\n        <div class='gap'></div>\n\n        <button type='submit' id='add-project-submit'>Create Project</button>\n\n        ",r.appendChild(s),t.appendChild(r),n.appendChild(t)})(),(()=>{let t=i.createContainer("display","");n.appendChild(t)})()},defaultRender:()=>{console.log("localStorage is empty",e)},nonEmptyRender:()=>{for(let e=0;e<localStorage.length;e++){let n=localStorage.getItem(localStorage.key(e)),r=JSON.parse(n);Object.setPrototypeOf(r,a),t.push(r);let s=i.createContainer("card",`card-${e}`),o=i.createContainer("card-header",""),l=i.createEl("h4","card-header-text","",`${r.title}`);o.appendChild(l);let d=i.createContainer("project-btns","");d.innerHTML="\n            <button class='project-details'>Details</button>\n            <button class='add-task'>Add Task</button>\n            <button class='project-delete'>X</button>\n            <button class='project-toggle'>Toggle</button>\n            ",o.appendChild(d),s.appendChild(o);let c=i.createContainer("add-task-form-container","");c.innerHTML=`\n            <form class='add-task-form' id='add-task-form-${e}'>\n            <input type='text' maxlength='35' placeholder=' -- Task Title -- ' id='add-task-title-${e}'>\n            <input type='text' maxlength='35' placeholder=' -- Task Description -- ' id='add-task-description-${e}'>\n            <input type='text' maxlength='35' placeholder=' -- mm/dd/yy -- ' id='add-task-dueDate-${e}'>\n            <input type='text' maxlength='35' placeholder=' -- Task Priority -- ' id='add-task-priority-${e}'>\n    \n            <button type='submit' id='add-task-submit-${e}'>Create Project</button>\n            \n            </form>\n            `,s.appendChild(c);let p=i.createContainer("tasks",`tasks-${e}`);r.items.forEach((function(t,e){let a=i.createContainer("task-card-container",`task-card-${e}-container`);a.innerHTML=`\n                    <div class='task-card' id='task-card-${e}'>\n                        <div class='task-header-text'>\n                        <h4 class='task-title-text'>${t.title}</h4>\n                        <p class='task-dueDate'>${t.dueDate}</p> \n                        </div>\n                        <div class='task-btns'>\n                            <button class='task-details'>Details</button>\n                            <button class='edit-task'>Edit Task</button>\n                            <button class='task-delete'>X</button>\n                            <button class='task-toggle'>Toggle</button>\n                        </div>\n                    </div>\n                    `;let n=i.createContainer("edit-task-form-container",`edit-task-form-container-${e}`);n.innerHTML=`\n                <form class='edit-task-form' id='edit-task-form-${e}'>\n                <input type='text' maxlength='35' placeholder=' -- New Task Title -- ' id='edit-task-title-${e}'>\n                <input type='text' maxlength='35' placeholder=' -- New Task Description -- ' id='edit-task-description-${e}'>\n                <input type='text' maxlength='35' placeholder=' -- mm/dd/yy -- ' id='edit-task-dueDate-${e}'>\n                <input type='text' maxlength='35' placeholder=' -- New Task Priority -- ' id='edit-task-priority-${e}'>\n        \n                <button type='submit' id='edit-task-submit-${e}'>Save Changes</button>\n                \n                </form>\n                `;let r=i.createContainer("task-details-container",`task-details-container-${e}`);r.innerHTML=`\n                <p class='task-description'>${t.description}</p>\n                <p class='task-priority'>${t.priority}</p>\n                `,a.appendChild(r),a.appendChild(n),p.appendChild(a)})),s.appendChild(p),document.querySelector(".display").appendChild(s)}},clearDisplay:()=>{document.querySelector(".display").innerHTML=""}}}(),i={createContainer:(t,e)=>{let a=document.createElement("div");return""!=t&&a.classList.add(t),""!=e&&(a.id=e),a},createEl:(t,e,a,n)=>{let i=document.createElement(t);return""!=e&&i.classList.toggle(e),""!=a&&(i.id=a),""!=n&&(i.innerText=n),i}},r=class{constructor(t,e,a,n){this.title=t,this.description=e,this.dueDate=a,this.priority=n,this.status=!1,this.type="task"}editTitle(t){this.title=t}editDescription(t){this.description=t}editDueDate(t){this.dueDate=t}editPriority(t){this.priority=t}toggleStatus(){this.status=!this.status}};var s=function(){const e=()=>{Array.from(document.querySelector(".display").childNodes).forEach((function(i,s){let l=Array.from(i.children),d=Array.from(i.childNodes[0].childNodes),c=Array.from(d[1].children);c[0].addEventListener("click",(function(){l[2].classList.toggle("active")})),c[1].addEventListener("click",(function(){l[1].classList.toggle("active");let t=l[1].children[0];t.addEventListener("submit",(function(a){a.preventDefault(),a.stopImmediatePropagation();let i=t.children[0].value,l=t.children[1].value,d=t.children[2].value,c=t.children[3].value;const p=new r(i,l,d,c);o.updateTaskStorage(s,p),n.clearDisplay(),n.nonEmptyRender(),e()}))})),c[2].addEventListener("click",(function(){let t=d[0].innerText;localStorage.removeItem(t),n.clearDisplay(),n.nonEmptyRender(),e()})),c[3].addEventListener("click",(function(){let e=d[0].innerText,n=localStorage.getItem(e),i=JSON.parse(n);i.status=!i.status;let r=JSON.stringify(i);localStorage.setItem(e,r);let o=JSON.parse(r);t.splice(s,1,o),Object.setPrototypeOf(o,a),console.log(`Project-${e}: status -> ${o.status}`)})),Array.from(i.children[2].children).forEach((function(i,o){const l=Array.from(i.children),c=l[0],p=l[1],u=l[2],m=Array.from(c.children),h=Array.from(m[1].children);let g=m[0].children[0].innerText,y=Array.from(u.children)[0],f=Array.from(y.children);h[0].addEventListener("click",(function(t){t.preventDefault(),p.classList.toggle("secondary-active")})),h[1].addEventListener("click",(function(i){i.preventDefault(),u.classList.toggle("secondary-active");let l=d[0].innerText;console.log(l),y.addEventListener("submit",(function(i){i.preventDefault(),i.stopImmediatePropagation();let d=localStorage.getItem(l),c=JSON.parse(d);Object.setPrototypeOf(c,a);let p=f[0].value,u=f[1].value,m=f[2].value,h=f[3].value,g=new r(p,u,m,h);t[s].items.splice(o,1,g),t[s];let y=JSON.stringify(t[s]);localStorage.setItem(l,y),n.clearDisplay(),n.nonEmptyRender(),e()}))})),h[2].addEventListener("click",(function(a){a.preventDefault();let i=t[s];t[s].items.splice(o,1);let r=JSON.stringify(i);localStorage.setItem(i.title,r),n.clearDisplay(),n.nonEmptyRender(),e()})),h[3].addEventListener("click",(function(a){a.preventDefault();let i=d[0].innerText,r=t[s];r.items[o].status=!r.items[o].status;let l=JSON.stringify(r);localStorage.setItem(r.title,l),console.log(`Project-${i} -- Task-${g}: status -> ${r.items[o].status}`),n.clearDisplay(),n.nonEmptyRender(),e()}))}))}))};return{projectBtnEvents:e}}();const o={saveToStorage:()=>{document.querySelector(".add-project-form").addEventListener("submit",(function(e){e.preventDefault(),e.stopImmediatePropagation();let i=document.getElementById("add-project-title").value,o=new a(i),l=new r("default task","edit me...","12/31/24","low");o.addTask(l),t.push(o);let d=JSON.stringify(o);localStorage.setItem(`${i}`,d),n.clearDisplay(),n.nonEmptyRender(),s.projectBtnEvents()}))},updateTaskStorage:(e,a)=>{localStorage.getItem(localStorage.key(e));const n=t[e];n.items.push(a);const i=JSON.stringify(n);localStorage.setItem(n.title,i)},updateTaskValues:(t,e,a)=>{}};!function(){if(n.pageOnLoad(),0===localStorage.length){console.log("empty",e),o.saveToStorage();let t=[];console.log("empty model",t)}else localStorage.length>0&&(e=!0,console.log("not empty",e),n.nonEmptyRender(),s.projectBtnEvents(),o.saveToStorage())}()})();